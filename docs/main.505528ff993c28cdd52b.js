!function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);f.length;)f.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;o.push(["/7QA",1]),r()}({"/7QA":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("DtyJ"),a=r("ahDk"),o=r("CO/c"),i=r("6luj"),s=n.fromEvent(document.getElementById("diagram-text"),"input").pipe(a.map(e=>e.target),a.map(e=>e.value),a.debounceTime(375),a.map(o.toSizedNodeVertexPairs));new i.chart("#outlet",s)},"6luj":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chart=void 0;const n=r("VphZ");let a=[];t.chart=class{constructor(e,t){this.width=900,this.height=500,this.drag=e=>n.drag().on("start",t=>{n.event.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",e=>{e.fx=n.event.x,e.fy=n.event.y}).on("end",t=>{n.event.active||e.alphaTarget(0),t.fx=null,t.fy=null}),this.graphData$=t,this.init(e)}init(e){const t=n.select(e),r=t.append("g").attr("class","lines");this.graphData$.subscribe(e=>{a=e.nodes;const o=a.map((e,t)=>({index:t,id:e})),i=e.links.map(e=>({id:e.source,source:e.source,target:e.target,direction:e.edge})),s=n.forceSimulation(o).force("link",n.forceLink(i).id(e=>a[e.index].name||"unknown")).force("charge",n.forceManyBody()).force("center",n.forceCenter(this.width/2,this.height/2)).force("collision",n.forceCollide().radius(e=>a[e.index].radius+50)),c=r.selectAll(".line").data(i).join("line").attr("stroke-opacity",1).attr("class",e=>e.direction+" line").attr("data-link",e=>{const t=e;return JSON.stringify(t)}).attr("marker-center","url(#triangle)").attr("stroke-width",2).attr("stroke-dasharray","5 5").attr("stroke-dashoffset",5).attr("stroke",e=>"increases"===e.direction?"green":"red");n.interval(()=>{t.selectAll(".line").each((function(e){n.select(this).transition().ease(n.easeCircle).attr("stroke-dashoffset",0)}))},250);const l=t.selectAll(".node").data(o).join("g").attr("class","node").call(()=>this.drag(s));l.selectAll("circle").remove(),l.selectAll("text").remove(),l.append("circle").attr("stroke","black").attr("stroke-width",1.5).attr("r",e=>(e=>e.radius+30)(a[e.index])).attr("fill","white"),l.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").text(e=>a[e.index].name),s.on("tick",()=>{c.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),l.attr("transform",e=>`translate(${e.x}, ${e.y})`)})})}}},"CO/c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toNodeVertexPairs=t.toSizedNodeVertexPairs=void 0,t.toSizedNodeVertexPairs=e=>{const r=t.toNodeVertexPairs(e),n=r.reduce((e,t)=>(e[t.source]||(e[t.source]={name:t.source,radius:0}),e[t.target]||(e[t.target]={name:t.target,radius:0}),"increases"===t.edge&&(e[t.target].radius+=5),"decreases"===t.edge&&(e[t.target].radius-=5),e),{});return{nodes:Object.values(n),links:r}},t.toNodeVertexPairs=e=>e.split("\n").map(a).filter(e=>null!==e);const n=e=>"+"===e||"-"===e;function a(e){const t={edge:"",start:"",end:""};let r=!1,a=!0;return e.split("").forEach(e=>{!function(e){return'"'===e}(e)?!function(e,t){return!e&&n(t)}(r,e)?a?t.start+=e:t.end+=e:(t.edge=e,a=!1):r=!r}),function(e){return""!==e.start&&""!==e.end&&n(e.edge)}(t)?{edge:"+"===t.edge?"increases":"decreases",source:t.start,target:t.end}:null}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9jaGFydGluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2UtZGVzY3JpcHRpb24vcGFyc2UudHMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJkaWFncmFtRGVzY3JpcHRpb24kIiwiZnJvbUV2ZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBpcGUiLCJtYXAiLCJlIiwidGFyZ2V0IiwiZGVib3VuY2VUaW1lIiwidG9TaXplZE5vZGVWZXJ0ZXhQYWlycyIsImNoYXJ0Iiwic2l6ZWROb2RlcyIsImNvbnRhaW5lciIsImdyYXBoRGF0YSIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhZyIsInNpbXVsYXRpb24iLCJkMyIsIm9uIiwiZXZlbnQiLCJhY3RpdmUiLCJhbHBoYVRhcmdldCIsInJlc3RhcnQiLCJmeCIsIngiLCJmeSIsInkiLCJ0aGlzIiwiZ3JhcGhEYXRhJCIsImluaXQiLCJzdmciLCJzZWxlY3QiLCJsaW5lc0dyb3VwIiwiYXBwZW5kIiwiYXR0ciIsInN1YnNjcmliZSIsIm5vZGVzIiwidiIsImluZGV4IiwiaWQiLCJsaW5rcyIsInNvdXJjZSIsImRpcmVjdGlvbiIsImVkZ2UiLCJmb3JjZVNpbXVsYXRpb24iLCJmb3JjZSIsImZvcmNlTGluayIsImZvcmNlTWFueUJvZHkiLCJmb3JjZUNlbnRlciIsImZvcmNlQ29sbGlkZSIsInJhZGl1cyIsImxpbmsiLCJzZWxlY3RBbGwiLCJqb2luIiwiSlNPTiIsInN0cmluZ2lmeSIsImludGVydmFsIiwiZWFjaCIsInRyYW5zaXRpb24iLCJlYXNlIiwiZWFzZUNpcmNsZSIsIm5vZGUiLCJyZW1vdmUiLCJzaXplZE5vZGUiLCJjYWxjdWxhdGVSYWRpdXMiLCJ0ZXh0IiwicGFpcnMiLCJ0b05vZGVWZXJ0ZXhQYWlycyIsImdhdGhlcmVkTm9kZXMiLCJyZWR1Y2UiLCJhY2MiLCJjdXJyIiwidmFsdWVzIiwic3BsaXQiLCJwYXJzZUxpbmUiLCJmaWx0ZXIiLCJpc0xpbmtpbmdDaGFyIiwicG90ZW50aWFsIiwic3RhcnQiLCJlbmQiLCJpblF1b3RlZFN0cmluZyIsInJlYWRpbmdTdGFydCIsImZvckVhY2giLCJpc1dvcmRCb3VuZGFyeSIsImZpbmlzaGVkUmVhZGluZ1N0YXJ0IiwiaXNWYWxpZFBhaXIiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FDaEJJLEVB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bEJELEVBQVVFLEtBQWNILEVBQWNDLEVBQVVsQyxNQTZCMUUwQyxDQUFZUixHQUFhLENBQzVCbEMsS0FBeUIsTUFBbkJrQyxFQUFVbEMsS0FBZSxZQUFjLFlBQzdDRixPQUFRb0MsRUFBVUMsTUFDbEJ4RSxPQUFRdUUsRUFBVUUsS0FDbEIiLCJmaWxlIjoibWFpbi41MDU1MjhmZjk5M2MyOGNkZDUyYi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbXCIvN1FBXCIsMV0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJpbXBvcnQge2Zyb21FdmVudH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge2RlYm91bmNlVGltZSwgbWFwfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcbmltcG9ydCB7dG9TaXplZE5vZGVWZXJ0ZXhQYWlyc30gZnJvbSBcIi4vcGFyc2UtZGVzY3JpcHRpb24vcGFyc2VcIjtcbmltcG9ydCB7Y2hhcnR9IGZyb20gXCIuL2NoYXJ0L2NoYXJ0aW5nXCI7XG5cblxuXG5jb25zdCBkaWFncmFtRGVzY3JpcHRpb24kID0gZnJvbUV2ZW50PElucHV0RXZlbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWFncmFtLXRleHQnKSwgJ2lucHV0JylcbiAgICAucGlwZShcbiAgICAgICAgbWFwKGUgPT4gKGUudGFyZ2V0IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpKSxcbiAgICAgICAgbWFwKGUgPT4gZS52YWx1ZSksXG4gICAgICAgIGRlYm91bmNlVGltZSgzNzUpLFxuICAgICAgICBtYXAodG9TaXplZE5vZGVWZXJ0ZXhQYWlycylcbiAgICApO1xuXG5uZXcgY2hhcnQoJyNvdXRsZXQnLCBkaWFncmFtRGVzY3JpcHRpb24kKSIsImltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0IHtEcmFnQmVoYXZpb3IsIERyYWdnZWRFbGVtZW50QmFzZVR5cGUsIFNpbXVsYXRpb25MaW5rRGF0dW0sIFNpbXVsYXRpb25Ob2RlRGF0dW19IGZyb20gXCJkM1wiO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHtTaXplZE5vZGUsIFNpemVkUGFpcnN9IGZyb20gXCIuLi9wYXJzZS1kZXNjcmlwdGlvbi9wYXJzZVwiO1xuaW1wb3J0IHtTaW11bGF0aW9ufSBmcm9tIFwiZDMtZm9yY2VcIjtcblxuaW50ZXJmYWNlIEtleWVkIHtcbiAgICBpZDogU2l6ZWROb2RlXG59XG5cbmludGVyZmFjZSBOb2RlIGV4dGVuZHMgU2ltdWxhdGlvbk5vZGVEYXR1bSB7XG59XG5cbmludGVyZmFjZSBMaW5rIGV4dGVuZHMgU2ltdWxhdGlvbkxpbmtEYXR1bTxOb2RlPiB7XG4gICAgZGlyZWN0aW9uOiBcImluY3JlYXNlc1wiIHwgXCJkZWNyZWFzZXNcIlxufVxuXG5jb25zdCBjYWxjdWxhdGVSYWRpdXMgPSAoc2l6ZWROb2RlOiBTaXplZE5vZGUpOiBudW1iZXIgPT4gc2l6ZWROb2RlLnJhZGl1cyArIDMwO1xuXG5sZXQgc2l6ZWROb2RlczogU2l6ZWROb2RlW10gPSBbXVxuXG5leHBvcnQgY2xhc3MgY2hhcnQge1xuICAgIHByaXZhdGUgZ3JvdXA6IGQzLlNlbGVjdGlvbjxhbnksIGFueSwgYW55LCBhbnk+O1xuICAgIHByaXZhdGUgZ3JhcGhEYXRhJDogT2JzZXJ2YWJsZTxTaXplZFBhaXJzPjtcbiAgICBwcml2YXRlIHdpZHRoID0gOTAwXG4gICAgcHJpdmF0ZSBoZWlnaHQgPSA1MDBcblxuICAgIHByaXZhdGUgZHJhZyA9IChzaW11bGF0aW9uOiBTaW11bGF0aW9uPE5vZGUsIExpbms+KTogRHJhZ0JlaGF2aW9yPERyYWdnZWRFbGVtZW50QmFzZVR5cGUsIHVua25vd24sIHVua25vd24+ID0+IHtcblxuICAgICAgICBjb25zdCBvbkRyYWdTdGFydCA9IChkOiBOb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTtcbiAgICAgICAgICAgIGQuZnggPSBkLng7XG4gICAgICAgICAgICBkLmZ5ID0gZC55O1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uRHJhZyA9IChkOiBOb2RlKSA9PiB7XG4gICAgICAgICAgICBkLmZ4ID0gZDMuZXZlbnQueDtcbiAgICAgICAgICAgIGQuZnkgPSBkMy5ldmVudC55O1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uRHJhZ0VuZCA9IChkOiBOb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTtcbiAgICAgICAgICAgIGQuZnggPSBudWxsO1xuICAgICAgICAgICAgZC5meSA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZHJhZyA9IGQzLmRyYWcoKSBhcyBEcmFnQmVoYXZpb3I8RHJhZ2dlZEVsZW1lbnRCYXNlVHlwZSwgdW5rbm93biwgdW5rbm93bj47XG4gICAgICAgIHJldHVybiBkcmFnXG4gICAgICAgICAgICAub24oXCJzdGFydFwiLCBvbkRyYWdTdGFydClcbiAgICAgICAgICAgIC5vbihcImRyYWdcIiwgb25EcmFnKVxuICAgICAgICAgICAgLm9uKFwiZW5kXCIsIG9uRHJhZ0VuZCk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyOiBzdHJpbmcsIGdyYXBoRGF0YTogT2JzZXJ2YWJsZTxTaXplZFBhaXJzPikge1xuICAgICAgICB0aGlzLmdyYXBoRGF0YSQgPSBncmFwaERhdGFcbiAgICAgICAgdGhpcy5pbml0KGNvbnRhaW5lcik7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGluaXQoY29udGFpbmVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KGNvbnRhaW5lcik7XG5cbiAgICAgICAgY29uc3QgbGluZXNHcm91cCA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdsaW5lcycpXG5cbiAgICAgICAgdGhpcy5ncmFwaERhdGEkLnN1YnNjcmliZShlID0+IHtcblxuICAgICAgICAgICAgc2l6ZWROb2RlcyA9IGUubm9kZXNcblxuICAgICAgICAgICAgY29uc3Qgbm9kZXM6IChLZXllZCAmIE5vZGUpW10gPSBzaXplZE5vZGVzLm1hcCgodiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7aW5kZXg6IGksIGlkOiB2fVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgbGlua3M6IExpbmtbXSA9IGUubGlua3MubWFwKHYgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7aWQ6IHYuc291cmNlLCBzb3VyY2U6IHYuc291cmNlLCB0YXJnZXQ6IHYudGFyZ2V0LCBkaXJlY3Rpb246IHYuZWRnZX1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzaW11bGF0aW9uOiBTaW11bGF0aW9uPE5vZGUsIExpbms+ID0gZDMuZm9yY2VTaW11bGF0aW9uKG5vZGVzKVxuICAgICAgICAgICAgICAgIC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKGxpbmtzKS5pZChkID0+IHNpemVkTm9kZXNbZC5pbmRleF0ubmFtZSB8fCBcInVua25vd25cIikpXG4gICAgICAgICAgICAgICAgLmZvcmNlKFwiY2hhcmdlXCIsIGQzLmZvcmNlTWFueUJvZHkoKSlcbiAgICAgICAgICAgICAgICAuZm9yY2UoXCJjZW50ZXJcIiwgZDMuZm9yY2VDZW50ZXIodGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMikpXG4gICAgICAgICAgICAgICAgLmZvcmNlKCdjb2xsaXNpb24nLCBkMy5mb3JjZUNvbGxpZGUoKS5yYWRpdXMoZCA9PiBzaXplZE5vZGVzW2QuaW5kZXhdLnJhZGl1cyArIDUwKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBsaW5lc0dyb3VwXG4gICAgICAgICAgICAgICAgLnNlbGVjdEFsbChcIi5saW5lXCIpXG4gICAgICAgICAgICAgICAgLmRhdGEobGlua3MpXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJsaW5lXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2Utb3BhY2l0eVwiLCAxKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkIGFzIExpbmtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2xpbmsuZGlyZWN0aW9ufSBsaW5lYFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkYXRhLWxpbmtcIiwgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkIGFzIExpbmtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGxpbmspXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcIm1hcmtlci1jZW50ZXJcIiwgXCJ1cmwoI3RyaWFuZ2xlKVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2UtZGFzaGFycmF5XCIsIFwiNSA1XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2UtZGFzaG9mZnNldFwiLCA1KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZCBhcyBMaW5rXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5rLmRpcmVjdGlvbiA9PT0gXCJpbmNyZWFzZXNcIiA/IFwiZ3JlZW5cIiA6IFwicmVkXCJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZDMuaW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoXCIubGluZVwiKS5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vZWFjaCBsaW5lIGdldCB0aGUgdG90YWwgbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAvLyBkLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vcGVyZm9ybSB0cmFuc2l0aW9uIGZvciBsaW5lIHVzaW5nIGRhc2hhcnJheSBhbmQgb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVhc2UoZDMuZWFzZUNpcmNsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlLWRhc2hvZmZzZXRcIiwgMCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sIDI1MClcblxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHN2Z1xuICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoXCIubm9kZVwiKVxuICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiZ1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXG4gICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmFnKHNpbXVsYXRpb24pXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5vZGUuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLnJlbW92ZSgpXG4gICAgICAgICAgICBub2RlLnNlbGVjdEFsbChcInRleHRcIikucmVtb3ZlKClcblxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgMS41KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2l6ZWROb2RlID0gc2l6ZWROb2Rlc1tkLmluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZVJhZGl1cyhzaXplZE5vZGUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwid2hpdGVcIilcblxuICAgICAgICAgICAgLyogQ3JlYXRlIHRoZSB0ZXh0IGZvciBlYWNoIGJsb2NrICovXG4gICAgICAgICAgICBub2RlLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJhbGlnbm1lbnQtYmFzZWxpbmVcIiwgXCJjZW50cmFsXCIpXG4gICAgICAgICAgICAgICAgLnRleHQoKGQ6IE5vZGUpID0+IHNpemVkTm9kZXNbZC5pbmRleF0ubmFtZSlcblxuICAgICAgICAgICAgc2ltdWxhdGlvbi5vbihcInRpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCAoZDogTGluaykgPT4gKGQuc291cmNlIGFzIE5vZGUpLngpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieTFcIiwgKGQ6IExpbmspID0+IChkLnNvdXJjZSBhcyBOb2RlKS55KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIngyXCIsIChkOiBMaW5rKSA9PiAoZC50YXJnZXQgYXMgTm9kZSkueClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ5MlwiLCAoZDogTGluaykgPT4gKGQudGFyZ2V0IGFzIE5vZGUpLnkpO1xuXG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBkID0+IGB0cmFuc2xhdGUoJHtkLnh9LCAke2QueX0pYClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pXG4gICAgfVxuXG5cbn1cblxuIiwiZXhwb3J0IGNvbnN0IHRvU2l6ZWROb2RlVmVydGV4UGFpcnMgPSAoczogc3RyaW5nKTogU2l6ZWRQYWlycyA9PiB7XG4gICAgY29uc3QgcGFpcnMgPSB0b05vZGVWZXJ0ZXhQYWlycyhzKVxuXG4gICAgY29uc3QgZ2F0aGVyZWROb2RlcyA9IHBhaXJzLnJlZHVjZTx7W2lkOiBzdHJpbmddOiBTaXplZE5vZGV9PigoYWNjLCBjdXJyKSA9PiB7XG4gICAgICAgIGlmICghYWNjW2N1cnIuc291cmNlXSkge1xuICAgICAgICAgICAgYWNjW2N1cnIuc291cmNlXSA9IHsgbmFtZTogY3Vyci5zb3VyY2UsIHJhZGl1czogMCB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY2NbY3Vyci50YXJnZXRdKSB7XG4gICAgICAgICAgICBhY2NbY3Vyci50YXJnZXRdID0geyBuYW1lOiBjdXJyLnRhcmdldCwgcmFkaXVzOiAwIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3Vyci5lZGdlID09PSBcImluY3JlYXNlc1wiKSB7XG4gICAgICAgICAgICBhY2NbY3Vyci50YXJnZXRdLnJhZGl1cyArPSA1XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnIuZWRnZSA9PT0gXCJkZWNyZWFzZXNcIikge1xuICAgICAgICAgICAgYWNjW2N1cnIudGFyZ2V0XS5yYWRpdXMgLT0gNVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZXM6IE9iamVjdC52YWx1ZXMoZ2F0aGVyZWROb2RlcyksXG4gICAgICAgIGxpbmtzOiBwYWlyc1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRvTm9kZVZlcnRleFBhaXJzID0gKHM6IHN0cmluZyk6IEFycmF5PFBhaXI+ID0+XG4gICAgcy5zcGxpdChcIlxcblwiKVxuICAgICAgICAubWFwKHBhcnNlTGluZSlcbiAgICAgICAgLmZpbHRlcih4ID0+IHggIT09IG51bGwpXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZWRQYWlycyB7XG4gICAgbm9kZXM6IFNpemVkTm9kZVtdLFxuICAgIGxpbmtzOiBQYWlyW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaXplZE5vZGUge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHJhZGl1czogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFpciB7XG4gICAgZWRnZTogXCJpbmNyZWFzZXNcIiB8IFwiZGVjcmVhc2VzXCIsXG4gICAgc291cmNlOiBzdHJpbmdcbiAgICB0YXJnZXQ6IHN0cmluZ1xufVxuXG5jb25zdCBpc0xpbmtpbmdDaGFyID0gKHg6IHN0cmluZykgPT4geCA9PT0gJysnIHx8IHggPT09ICctJztcblxuZnVuY3Rpb24gZmluaXNoZWRSZWFkaW5nU3RhcnQoaW5RdW90ZWRTdHJpbmc6IGJvb2xlYW4sIHg6IHN0cmluZykge1xuICAgIHJldHVybiAhaW5RdW90ZWRTdHJpbmcgJiYgaXNMaW5raW5nQ2hhcih4KTtcbn1cblxuZnVuY3Rpb24gaXNXb3JkQm91bmRhcnkoeDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHggPT09IFwiXFxcIlwiO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkUGFpcihwb3RlbnRpYWw6IHsgZWRnZTogc3RyaW5nOyBzdGFydDogc3RyaW5nOyBlbmQ6IHN0cmluZyB9KSB7XG4gICAgcmV0dXJuIHBvdGVudGlhbC5zdGFydCAhPT0gXCJcIiAmJiBwb3RlbnRpYWwuZW5kICE9PSBcIlwiICYmIGlzTGlua2luZ0NoYXIocG90ZW50aWFsLmVkZ2UpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUxpbmUoczogc3RyaW5nKTogUGFpciB8IG51bGwge1xuICAgIGNvbnN0IHBvdGVudGlhbCA9IHtcbiAgICAgICAgZWRnZTogXCJcIixcbiAgICAgICAgc3RhcnQ6IFwiXCIsXG4gICAgICAgIGVuZDogXCJcIlxuICAgIH1cblxuICAgIGxldCBpblF1b3RlZFN0cmluZyA9IGZhbHNlXG4gICAgbGV0IHJlYWRpbmdTdGFydCA9IHRydWVcblxuICAgIHMuc3BsaXQoJycpXG4gICAgICAgIC5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgaWYgKGlzV29yZEJvdW5kYXJ5KHgpKSB7XG4gICAgICAgICAgICAgICAgaW5RdW90ZWRTdHJpbmcgPSAhaW5RdW90ZWRTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmluaXNoZWRSZWFkaW5nU3RhcnQoaW5RdW90ZWRTdHJpbmcsIHgpKSB7XG4gICAgICAgICAgICAgICAgcG90ZW50aWFsLmVkZ2UgPSB4XG4gICAgICAgICAgICAgICAgcmVhZGluZ1N0YXJ0ID0gZmFsc2VcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWRpbmdTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWwuc3RhcnQgKz0geFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbC5lbmQgKz0geFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIHJldHVybiBpc1ZhbGlkUGFpcihwb3RlbnRpYWwpID8ge1xuICAgICAgICBlZGdlOiBwb3RlbnRpYWwuZWRnZSA9PT0gXCIrXCIgPyBcImluY3JlYXNlc1wiIDogXCJkZWNyZWFzZXNcIixcbiAgICAgICAgc291cmNlOiBwb3RlbnRpYWwuc3RhcnQsXG4gICAgICAgIHRhcmdldDogcG90ZW50aWFsLmVuZFxuICAgIH0gOiBudWxsXG59Il0sInNvdXJjZVJvb3QiOiIifQ==