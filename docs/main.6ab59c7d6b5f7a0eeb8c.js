!function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push(["/7QA",1]),r()}({"/7QA":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("DtyJ"),a=r("ahDk"),o=r("CO/c"),i=r("6luj"),s=n.fromEvent(document.getElementById("diagram-text"),"input").pipe(a.map(e=>e.target),a.map(e=>e.value),a.debounceTime(375),a.map(o.toSizedNodeVertexPairs));new i.chart("#outlet",s)},"6luj":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chart=void 0;const n=r("VphZ");let a=[];t.chart=class{constructor(e,t){this.width=900,this.height=500,this.drag=e=>n.drag().on("start",t=>{n.event.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",e=>{e.fx=n.event.x,e.fy=n.event.y}).on("end",t=>{n.event.active||e.alphaTarget(0),t.fx=null,t.fy=null}),this.graphData$=t,this.init(e)}init(e){this.group=n.select(e).append("g"),this.graphData$.subscribe(e=>{a=e.nodes,console.log(a);const t=a.map((e,t)=>({index:t,id:e})),r=e.links.map(e=>({id:e.source,source:e.source,target:e.target,direction:e.edge})),o=n.forceSimulation(t).force("link",n.forceLink(r).id(e=>a[e.index].name||"unknown")).force("charge",n.forceManyBody()).force("center",n.forceCenter(this.width/2,this.height/2)).force("collision",n.forceCollide().radius(e=>a[e.index].radius+50)),i=n.select("svg"),s=i.selectAll(".line").data(r).join("line").attr("stroke-opacity",1).attr("class",e=>e.direction+" line").attr("data-link",e=>{const t=e;return JSON.stringify(t)}).attr("marker-center","url(#triangle)").attr("stroke-width",2).attr("stroke",e=>"increases"===e.direction?"green":"red");n.interval(()=>{i.selectAll(".line").each((function(e){n.select(this).attr("stroke-dasharray","5 5").attr("stroke-dashoffset",5).transition().ease(n.easeCircle).attr("stroke-dashoffset",0)}))},250);const c=i.selectAll(".node").data(t).join("g").attr("class","node").call(()=>this.drag(o));c.append("circle").attr("stroke","black").attr("stroke-width",1.5).attr("r",e=>(e=>e.radius+30)(a[e.index])).attr("fill","white"),c.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").text(e=>a[e.index].name),o.on("tick",()=>{s.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),c.attr("transform",e=>`translate(${e.x}, ${e.y})`)})})}}},"CO/c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toNodeVertexPairs=t.toSizedNodeVertexPairs=void 0,t.toSizedNodeVertexPairs=e=>{const r=t.toNodeVertexPairs(e),n=r.reduce((e,t)=>(e[t.source]||(e[t.source]={name:t.source,radius:0}),e[t.target]||(e[t.target]={name:t.target,radius:0}),"increases"===t.edge&&(e[t.target].radius+=5),"decreases"===t.edge&&(e[t.target].radius-=5),e),{});return{nodes:Object.values(n),links:r}},t.toNodeVertexPairs=e=>e.split("\n").map(a).filter(e=>null!==e);const n=e=>"+"===e||"-"===e;function a(e){const t={edge:"",start:"",end:""};let r=!1,a=!0;return e.split("").forEach(e=>{!function(e){return'"'===e}(e)?!function(e,t){return!e&&n(t)}(r,e)?a?t.start+=e:t.end+=e:(t.edge=e,a=!1):r=!r}),function(e){return""!==e.start&&""!==e.end&&n(e.edge)}(t)?{edge:"+"===t.edge?"increases":"decreases",source:t.start,target:t.end}:null}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9jaGFydGluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2UtZGVzY3JpcHRpb24vcGFyc2UudHMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJkaWFncmFtRGVzY3JpcHRpb24kIiwiZnJvbUV2ZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBpcGUiLCJtYXAiLCJlIiwidGFyZ2V0IiwiZGVib3VuY2VUaW1lIiwidG9TaXplZE5vZGVWZXJ0ZXhQYWlycyIsImNoYXJ0Iiwic2l6ZWROb2RlcyIsImNvbnRhaW5lciIsImdyYXBoRGF0YSIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhZyIsInNpbXVsYXRpb24iLCJkMyIsIm9uIiwiZXZlbnQiLCJhY3RpdmUiLCJhbHBoYVRhcmdldCIsInJlc3RhcnQiLCJmeCIsIngiLCJmeSIsInkiLCJ0aGlzIiwiZ3JhcGhEYXRhJCIsImluaXQiLCJncm91cCIsInNlbGVjdCIsImFwcGVuZCIsInN1YnNjcmliZSIsIm5vZGVzIiwiY29uc29sZSIsImxvZyIsInYiLCJpbmRleCIsImlkIiwibGlua3MiLCJzb3VyY2UiLCJkaXJlY3Rpb24iLCJlZGdlIiwiZm9yY2VTaW11bGF0aW9uIiwiZm9yY2UiLCJmb3JjZUxpbmsiLCJmb3JjZU1hbnlCb2R5IiwiZm9yY2VDZW50ZXIiLCJmb3JjZUNvbGxpZGUiLCJyYWRpdXMiLCJzdmciLCJsaW5rIiwic2VsZWN0QWxsIiwiam9pbiIsImF0dHIiLCJKU09OIiwic3RyaW5naWZ5IiwiaW50ZXJ2YWwiLCJlYWNoIiwidG90YWxMZW5ndGgiLCJ0cmFuc2l0aW9uIiwiZWFzZSIsImVhc2VDaXJjbGUiLCJub2RlIiwic2l6ZWROb2RlIiwiY2FsY3VsYXRlUmFkaXVzIiwidGV4dCIsInBhaXJzIiwidG9Ob2RlVmVydGV4UGFpcnMiLCJnYXRoZXJlZE5vZGVzIiwicmVkdWNlIiwiYWNjIiwiY3VyciIsInZhbHVlcyIsInNwbGl0IiwicGFyc2VMaW5lIiwiZmlsdGVyIiwiaXNMaW5raW5nQ2hhciIsInBvdGVudGlhbCIsInN0YXJ0IiwiZW5kIiwiaW5RdW90ZWRTdHJpbmciLCJyZWFkaW5nU3RhcnQiLCJmb3JFYWNoIiwiaXNXb3JkQm91bmRhcnkiLCJmaW5pc2hlZFJlYWRpbmdTdGFydCIsImlzVmFsaWRQYWlyIl0sIm1hcHBpbmdzIjoiYUFDRSxTQUFTQSxFQUFxQkMsR0FRN0IsSUFQQSxJQU1JQyxFQUFVQyxFQU5WQyxFQUFX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QUFVcEMsTUE2QjFFNEMsQ0FBWVIsR0FBYSxDQUM1QnBDLEtBQXlCLE1BQW5Cb0MsRUFBVXBDLEtBQWUsWUFBYyxZQUM3Q0YsT0FBUXNDLEVBQVVDLE1BQ2xCMUUsT0FBUXlFLEVBQVVFLEtBQ2xCIiwiZmlsZSI6Im1haW4uNmFiNTljN2Q2YjVmN2EwZWViOGMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goW1wiLzdRQVwiLDFdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiaW1wb3J0IHtmcm9tRXZlbnR9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtkZWJvdW5jZVRpbWUsIG1hcH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5pbXBvcnQge3RvU2l6ZWROb2RlVmVydGV4UGFpcnN9IGZyb20gXCIuL3BhcnNlLWRlc2NyaXB0aW9uL3BhcnNlXCI7XG5pbXBvcnQge2NoYXJ0fSBmcm9tIFwiLi9jaGFydC9jaGFydGluZ1wiO1xuXG5cblxuY29uc3QgZGlhZ3JhbURlc2NyaXB0aW9uJCA9IGZyb21FdmVudDxJbnB1dEV2ZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlhZ3JhbS10ZXh0JyksICdpbnB1dCcpXG4gICAgLnBpcGUoXG4gICAgICAgIG1hcChlID0+IChlLnRhcmdldCBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KSksXG4gICAgICAgIG1hcChlID0+IGUudmFsdWUpLFxuICAgICAgICBkZWJvdW5jZVRpbWUoMzc1KSxcbiAgICAgICAgbWFwKHRvU2l6ZWROb2RlVmVydGV4UGFpcnMpXG4gICAgKTtcblxubmV3IGNoYXJ0KCcjb3V0bGV0JywgZGlhZ3JhbURlc2NyaXB0aW9uJCkiLCJpbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7U2l6ZWROb2RlLCBTaXplZFBhaXJzfSBmcm9tIFwiLi4vcGFyc2UtZGVzY3JpcHRpb24vcGFyc2VcIjtcbmltcG9ydCB7U2ltdWxhdGlvbk5vZGVEYXR1bSwgU2ltdWxhdGlvbkxpbmtEYXR1bSwgRHJhZ0JlaGF2aW9yLCBEcmFnZ2VkRWxlbWVudEJhc2VUeXBlfSBmcm9tIFwiZDNcIjtcbmltcG9ydCB7U2ltdWxhdGlvbn0gZnJvbSBcImQzLWZvcmNlXCI7XG5cbmludGVyZmFjZSBLZXllZCB7XG4gICAgaWQ6IFNpemVkTm9kZVxufVxuXG5pbnRlcmZhY2UgTm9kZSBleHRlbmRzIFNpbXVsYXRpb25Ob2RlRGF0dW0ge1xufVxuXG5pbnRlcmZhY2UgTGluayBleHRlbmRzIFNpbXVsYXRpb25MaW5rRGF0dW08Tm9kZT4ge1xuICAgIGRpcmVjdGlvbjogXCJpbmNyZWFzZXNcIiB8IFwiZGVjcmVhc2VzXCJcbn1cblxuY29uc3QgY2FsY3VsYXRlUmFkaXVzID0gKHNpemVkTm9kZTogU2l6ZWROb2RlKTogbnVtYmVyID0+IHNpemVkTm9kZS5yYWRpdXMgKyAzMDtcblxubGV0IHNpemVkTm9kZXM6IFNpemVkTm9kZVtdID0gW11cblxuZXhwb3J0IGNsYXNzIGNoYXJ0IHtcbiAgICBwcml2YXRlIGdyb3VwOiBkMy5TZWxlY3Rpb248YW55LCBhbnksIGFueSwgYW55PjtcbiAgICBwcml2YXRlIGdyYXBoRGF0YSQ6IE9ic2VydmFibGU8U2l6ZWRQYWlycz47XG4gICAgcHJpdmF0ZSB3aWR0aCA9IDkwMFxuICAgIHByaXZhdGUgaGVpZ2h0ID0gNTAwXG5cbiAgICBwcml2YXRlIGRyYWcgPSAoc2ltdWxhdGlvbjogU2ltdWxhdGlvbjxOb2RlLCBMaW5rPik6IERyYWdCZWhhdmlvcjxEcmFnZ2VkRWxlbWVudEJhc2VUeXBlLCB1bmtub3duLCB1bmtub3duPiA9PiB7XG5cbiAgICAgICAgY29uc3Qgb25EcmFnU3RhcnQgPSAoZDogTm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4zKS5yZXN0YXJ0KCk7XG4gICAgICAgICAgICBkLmZ4ID0gZC54O1xuICAgICAgICAgICAgZC5meSA9IGQueTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbkRyYWcgPSAoZDogTm9kZSkgPT4ge1xuICAgICAgICAgICAgZC5meCA9IGQzLmV2ZW50Lng7XG4gICAgICAgICAgICBkLmZ5ID0gZDMuZXZlbnQueTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbkRyYWdFbmQgPSAoZDogTm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7XG4gICAgICAgICAgICBkLmZ4ID0gbnVsbDtcbiAgICAgICAgICAgIGQuZnkgPSBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRyYWcgPSBkMy5kcmFnKCkgYXMgRHJhZ0JlaGF2aW9yPERyYWdnZWRFbGVtZW50QmFzZVR5cGUsIHVua25vd24sIHVua25vd24+O1xuICAgICAgICByZXR1cm4gZHJhZ1xuICAgICAgICAgICAgLm9uKFwic3RhcnRcIiwgb25EcmFnU3RhcnQpXG4gICAgICAgICAgICAub24oXCJkcmFnXCIsIG9uRHJhZylcbiAgICAgICAgICAgIC5vbihcImVuZFwiLCBvbkRyYWdFbmQpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogc3RyaW5nLCBncmFwaERhdGE6IE9ic2VydmFibGU8U2l6ZWRQYWlycz4pIHtcbiAgICAgICAgdGhpcy5ncmFwaERhdGEkID0gZ3JhcGhEYXRhXG4gICAgICAgIHRoaXMuaW5pdChjb250YWluZXIpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBpbml0KGNvbnRhaW5lcjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5hcHBlbmQoJ2cnKTtcblxuICAgICAgICB0aGlzLmdyYXBoRGF0YSQuc3Vic2NyaWJlKGUgPT4ge1xuXG4gICAgICAgICAgICBzaXplZE5vZGVzID0gZS5ub2Rlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2l6ZWROb2RlcylcblxuICAgICAgICAgICAgY29uc3Qgbm9kZXM6IChLZXllZCAmIE5vZGUpW10gPSBzaXplZE5vZGVzLm1hcCgodiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7aW5kZXg6IGksIGlkOiB2fVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgbGlua3M6IExpbmtbXSA9IGUubGlua3MubWFwKHYgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7aWQ6IHYuc291cmNlLCBzb3VyY2U6IHYuc291cmNlLCB0YXJnZXQ6IHYudGFyZ2V0LCBkaXJlY3Rpb246IHYuZWRnZX1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzaW11bGF0aW9uOiBTaW11bGF0aW9uPE5vZGUsIExpbms+ID0gZDMuZm9yY2VTaW11bGF0aW9uKG5vZGVzKVxuICAgICAgICAgICAgICAgIC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKGxpbmtzKS5pZChkID0+IHNpemVkTm9kZXNbZC5pbmRleF0ubmFtZSB8fCBcInVua25vd25cIikpXG4gICAgICAgICAgICAgICAgLmZvcmNlKFwiY2hhcmdlXCIsIGQzLmZvcmNlTWFueUJvZHkoKSlcbiAgICAgICAgICAgICAgICAuZm9yY2UoXCJjZW50ZXJcIiwgZDMuZm9yY2VDZW50ZXIodGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMikpXG4gICAgICAgICAgICAgICAgLmZvcmNlKCdjb2xsaXNpb24nLCBkMy5mb3JjZUNvbGxpZGUoKS5yYWRpdXMoZCA9PiBzaXplZE5vZGVzW2QuaW5kZXhdLnJhZGl1cyArIDUwKSk7XG5cblxuICAgICAgICAgICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KFwic3ZnXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gc3ZnXG4gICAgICAgICAgICAgICAgLnNlbGVjdEFsbChcIi5saW5lXCIpXG4gICAgICAgICAgICAgICAgLmRhdGEobGlua3MpXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJsaW5lXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2Utb3BhY2l0eVwiLCAxKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkIGFzIExpbmtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2xpbmsuZGlyZWN0aW9ufSBsaW5lYFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkYXRhLWxpbmtcIiwgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkIGFzIExpbmtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGxpbmspXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcIm1hcmtlci1jZW50ZXJcIiwgXCJ1cmwoI3RyaWFuZ2xlKVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkIGFzIExpbmtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmsuZGlyZWN0aW9uID09PSBcImluY3JlYXNlc1wiID8gXCJncmVlblwiIDogXCJyZWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkMy5pbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbChcIi5saW5lXCIpLmVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9lYWNoIGxpbmUgZ2V0IHRoZSB0b3RhbCBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsTGVuZ3RoID0gNSAvLyBkLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vcGVyZm9ybSB0cmFuc2l0aW9uIGZvciBsaW5lIHVzaW5nIGRhc2hhcnJheSBhbmQgb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2UtZGFzaGFycmF5XCIsIHRvdGFsTGVuZ3RoICsgXCIgXCIgKyB0b3RhbExlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlLWRhc2hvZmZzZXRcIiwgdG90YWxMZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWFzZShkMy5lYXNlQ2lyY2xlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2UtZGFzaG9mZnNldFwiLCAwKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSwgMjUwKVxuXG4gICAgICAgICAgICBjb25zdCBub2RlID0gc3ZnXG4gICAgICAgICAgICAgICAgLnNlbGVjdEFsbChcIi5ub2RlXCIpXG4gICAgICAgICAgICAgICAgLmRhdGEobm9kZXMpXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJnXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcbiAgICAgICAgICAgICAgICAuY2FsbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYWcoc2ltdWxhdGlvbilcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgMS41KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2l6ZWROb2RlID0gc2l6ZWROb2Rlc1tkLmluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZVJhZGl1cyhzaXplZE5vZGUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwid2hpdGVcIilcblxuICAgICAgICAgICAgLyogQ3JlYXRlIHRoZSB0ZXh0IGZvciBlYWNoIGJsb2NrICovXG4gICAgICAgICAgICBub2RlLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJhbGlnbm1lbnQtYmFzZWxpbmVcIiwgXCJjZW50cmFsXCIpXG4gICAgICAgICAgICAgICAgLnRleHQoKGQ6IE5vZGUpID0+IHNpemVkTm9kZXNbZC5pbmRleF0ubmFtZSlcblxuICAgICAgICAgICAgc2ltdWxhdGlvbi5vbihcInRpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCAoZDogTGluaykgPT4gKGQuc291cmNlIGFzIE5vZGUpLngpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieTFcIiwgKGQ6IExpbmspID0+IChkLnNvdXJjZSBhcyBOb2RlKS55KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIngyXCIsIChkOiBMaW5rKSA9PiAoZC50YXJnZXQgYXMgTm9kZSkueClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ5MlwiLCAoZDogTGluaykgPT4gKGQudGFyZ2V0IGFzIE5vZGUpLnkpO1xuXG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBkID0+IGB0cmFuc2xhdGUoJHtkLnh9LCAke2QueX0pYClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pXG4gICAgfVxuXG5cbn1cblxuIiwiZXhwb3J0IGNvbnN0IHRvU2l6ZWROb2RlVmVydGV4UGFpcnMgPSAoczogc3RyaW5nKTogU2l6ZWRQYWlycyA9PiB7XG4gICAgY29uc3QgcGFpcnMgPSB0b05vZGVWZXJ0ZXhQYWlycyhzKVxuXG4gICAgY29uc3QgZ2F0aGVyZWROb2RlcyA9IHBhaXJzLnJlZHVjZTx7W2lkOiBzdHJpbmddOiBTaXplZE5vZGV9PigoYWNjLCBjdXJyKSA9PiB7XG4gICAgICAgIGlmICghYWNjW2N1cnIuc291cmNlXSkge1xuICAgICAgICAgICAgYWNjW2N1cnIuc291cmNlXSA9IHsgbmFtZTogY3Vyci5zb3VyY2UsIHJhZGl1czogMCB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY2NbY3Vyci50YXJnZXRdKSB7XG4gICAgICAgICAgICBhY2NbY3Vyci50YXJnZXRdID0geyBuYW1lOiBjdXJyLnRhcmdldCwgcmFkaXVzOiAwIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3Vyci5lZGdlID09PSBcImluY3JlYXNlc1wiKSB7XG4gICAgICAgICAgICBhY2NbY3Vyci50YXJnZXRdLnJhZGl1cyArPSA1XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnIuZWRnZSA9PT0gXCJkZWNyZWFzZXNcIikge1xuICAgICAgICAgICAgYWNjW2N1cnIudGFyZ2V0XS5yYWRpdXMgLT0gNVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZXM6IE9iamVjdC52YWx1ZXMoZ2F0aGVyZWROb2RlcyksXG4gICAgICAgIGxpbmtzOiBwYWlyc1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRvTm9kZVZlcnRleFBhaXJzID0gKHM6IHN0cmluZyk6IEFycmF5PFBhaXI+ID0+XG4gICAgcy5zcGxpdChcIlxcblwiKVxuICAgICAgICAubWFwKHBhcnNlTGluZSlcbiAgICAgICAgLmZpbHRlcih4ID0+IHggIT09IG51bGwpXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZWRQYWlycyB7XG4gICAgbm9kZXM6IFNpemVkTm9kZVtdLFxuICAgIGxpbmtzOiBQYWlyW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaXplZE5vZGUge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHJhZGl1czogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFpciB7XG4gICAgZWRnZTogXCJpbmNyZWFzZXNcIiB8IFwiZGVjcmVhc2VzXCIsXG4gICAgc291cmNlOiBzdHJpbmdcbiAgICB0YXJnZXQ6IHN0cmluZ1xufVxuXG5jb25zdCBpc0xpbmtpbmdDaGFyID0gKHg6IHN0cmluZykgPT4geCA9PT0gJysnIHx8IHggPT09ICctJztcblxuZnVuY3Rpb24gZmluaXNoZWRSZWFkaW5nU3RhcnQoaW5RdW90ZWRTdHJpbmc6IGJvb2xlYW4sIHg6IHN0cmluZykge1xuICAgIHJldHVybiAhaW5RdW90ZWRTdHJpbmcgJiYgaXNMaW5raW5nQ2hhcih4KTtcbn1cblxuZnVuY3Rpb24gaXNXb3JkQm91bmRhcnkoeDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHggPT09IFwiXFxcIlwiO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkUGFpcihwb3RlbnRpYWw6IHsgZWRnZTogc3RyaW5nOyBzdGFydDogc3RyaW5nOyBlbmQ6IHN0cmluZyB9KSB7XG4gICAgcmV0dXJuIHBvdGVudGlhbC5zdGFydCAhPT0gXCJcIiAmJiBwb3RlbnRpYWwuZW5kICE9PSBcIlwiICYmIGlzTGlua2luZ0NoYXIocG90ZW50aWFsLmVkZ2UpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUxpbmUoczogc3RyaW5nKTogUGFpciB8IG51bGwge1xuICAgIGNvbnN0IHBvdGVudGlhbCA9IHtcbiAgICAgICAgZWRnZTogXCJcIixcbiAgICAgICAgc3RhcnQ6IFwiXCIsXG4gICAgICAgIGVuZDogXCJcIlxuICAgIH1cblxuICAgIGxldCBpblF1b3RlZFN0cmluZyA9IGZhbHNlXG4gICAgbGV0IHJlYWRpbmdTdGFydCA9IHRydWVcblxuICAgIHMuc3BsaXQoJycpXG4gICAgICAgIC5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgaWYgKGlzV29yZEJvdW5kYXJ5KHgpKSB7XG4gICAgICAgICAgICAgICAgaW5RdW90ZWRTdHJpbmcgPSAhaW5RdW90ZWRTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmluaXNoZWRSZWFkaW5nU3RhcnQoaW5RdW90ZWRTdHJpbmcsIHgpKSB7XG4gICAgICAgICAgICAgICAgcG90ZW50aWFsLmVkZ2UgPSB4XG4gICAgICAgICAgICAgICAgcmVhZGluZ1N0YXJ0ID0gZmFsc2VcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWRpbmdTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWwuc3RhcnQgKz0geFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbC5lbmQgKz0geFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIHJldHVybiBpc1ZhbGlkUGFpcihwb3RlbnRpYWwpID8ge1xuICAgICAgICBlZGdlOiBwb3RlbnRpYWwuZWRnZSA9PT0gXCIrXCIgPyBcImluY3JlYXNlc1wiIDogXCJkZWNyZWFzZXNcIixcbiAgICAgICAgc291cmNlOiBwb3RlbnRpYWwuc3RhcnQsXG4gICAgICAgIHRhcmdldDogcG90ZW50aWFsLmVuZFxuICAgIH0gOiBudWxsXG59Il0sInNvdXJjZVJvb3QiOiIifQ==